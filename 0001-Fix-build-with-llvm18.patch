From e25787685ab0283bcda7ec275e35d694e4e239cf Mon Sep 17 00:00:00 2001
Message-ID: <e25787685ab0283bcda7ec275e35d694e4e239cf.1710842983.git.mjg@fedoraproject.org>
From: Tom Stellard <tstellar@redhat.com>
Date: Mon, 18 Mar 2024 23:13:46 +0000
Subject: [PATCH] Fix build with llvm18

MJG: deal with both llvm17 and llvm18 cursor kinds
---
 scripts/wrap/parse.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/scripts/wrap/parse.py b/scripts/wrap/parse.py
index c6df24dae..a96f4964a 100644
--- a/scripts/wrap/parse.py
+++ b/scripts/wrap/parse.py
@@ -70,7 +70,8 @@ def get_children(cursor):
     for cursor in cursor.get_children():
         #verbose = state.state_.show_details( cursor.spelling)
         #verbose = 1
-        if cursor.kind == clang.cindex.CursorKind.UNEXPOSED_DECL:
+        if ((cursor.kind == clang.cindex.CursorKind.UNEXPOSED_DECL)
+          or (cursor.kind == clang.cindex.CursorKind.LINKAGE_SPEC)):
             # Things tagged with `extern "C" appear to be within this
             # cursor.
             for cursor2 in cursor.get_children():
-- 
2.44.0.413.g3b59069256

